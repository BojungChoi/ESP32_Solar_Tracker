# ESP32 Solar Tracker

## ESP32 기반 태양광 추적 시스템 제작 리포지토리

이 프로젝트는 ESP32, BH1750 조도센서, 스텝 모터, DRV8825 모터 드라이버를 기반으로 한 1축 태양광 추적 시스템입니다.  
태양의 위치에 따라 조도를 측정하고, 가장 밝은 방향으로 태양광 패널을 회전시킵니다. 또한 MPPT 회로를 이용하여 12V 배터리를 효율적으로 충전하며, 온도 센서를 통해 시스템 보호 기능도 제공합니다.

## 주요 기능

- 조도 기반 태양 추적  
  일정 주기마다 평균 조도를 측정하고, 기준 조도보다 10% 이상 감소한 경우 밝은 방향으로 회전

- 회전 중 밝기 판단 및 회귀  
  회전 중 조도를 0.5초 간격으로 측정하여 가장 밝은 지점을 기록하고, 일정 시간 내 충분히 밝은 위치를 찾지 못할 경우 해당 위치로 회귀

- 온도 기반 보호 로직  
  온도센서를 통해 40도 이상 감지 시 모터 회전을 중지하여 시스템 보호

- MPPT 기반 충전 시스템  
  태양광 패널과 MPPT 회로를 통해 12V 배터리 충전

## 하드웨어 구성

- ESP32
- BH1750 조도 센서 (1개)
- DRV8825 스텝모터 드라이버
- 정밀 스텝모터 (1.8도 / 스텝)
- MPPT 충전 모듈
- 12V 리튬이온 배터리
- 온도 센서 (디지털 또는 아날로그 방식 가능)

## 회로 구성 요약

- ESP32 ↔ BH1750: I2C (SDA: GPIO21, SCL: GPIO22)
- ESP32 ↔ DRV8825  
  - STEP: GPIO12  
  - DIR: GPIO13  
  - ENA: GPIO14

- 모터드라이버 MS1, MS2, MS3는 모두 GND로 연결하여 Full Step 모드로 설정 (1.8도/step)

## 소프트웨어 개요

- `loop()` 내에서 10초간 조도 평균 측정  
- 기준 조도보다 어두워진 경우 모터 회전 시작  
- 회전 중 조도 측정 및 최대 밝기 기록  
- 일정 조건 만족 시 정지 또는 회귀  
- 방향은 반복 시마다 토글되어 다양한 방향 탐색 가능

## 프로젝트 활용 예시

- 소형 태양광 패널 자동 추적 장치
- IoT 기반 에너지 최적화 교육 실습 장비
- 태양광 발전 효율 측정 실험

